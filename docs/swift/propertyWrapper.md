---
title: "属性包装器"
date: 2024-04-05T18:04:36+08:00
---

### 属性

属性是与特定类(class)、结构(struct)、枚举(enum) 关联的值。分为：`存储属性`、`计算属性`两类

- 存储属性为类型实例存放常量或变量值
- 计算属性通过进行计算得出一个值
- 类、结构、枚举都可以提供计算属性，但只有类和结构可以提供存储属性
- 属性通常和类型实例关联，但是也可以和类型本身进行关联，称为类型属性
- 可以为属性定义观察器，用来感知属性值的变化，或者响应值变化事件处理逻辑
- 属性观察器可以添加在自定义的存储属性上，也可以添加在继承自父类的存储属性上
- 可以使用属性包装器实现属性getter、setter方法逻辑的复用
- struct是值类型，与Int、Float、Bool等其它值类型特性一致
- class是引用类型
- lazy只能与var联用，只有在第一次被使用时才会进行初始化，可能存在多线程初始化问题
- inout类型的参数会回写，因而会触发对应的属性观察器
- 全局常量和变量总时计算时懒加载初始化机制，但不需要使用`lazy`标记
- 

### 属性包装器

属性包装器是把属性访问的代码与定义属性存储的代码进行隔离，在定义属性包装器时把属性访问的代码封装起来，属性定义时复用访问逻辑

- 定义属性包装器：可以使用`@propertyWrapper`标记类(class)、结构(struct)、枚举(enum)，并实现`wrapperValue`属性
- 使用属性包装器：在属性前使用属性包装器名称进行属性标记，也可以直接把属性包装器当作正常的类型使用
- 设置属性包装器初始值：添加自定义初始化器，
- `projectValue`定义的方法，可以通过使用`$`符号加属性名称调用
- 属性包装器可以应用到局部存储变量，但不是应用到全局变量或者计算变量上。
- 






